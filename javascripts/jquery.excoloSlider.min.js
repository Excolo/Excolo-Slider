/*!
 * Excolo Slider - A simple jquery slider
 *
 * Examples and documentation at:
 * http://excolo.github.io/Excolo-Slider/
 *
 * Author: Nikolaj Dam Larsen
 * Version: 1.0.0 (15-JUNE-2013)
 *
 * Released under the MIT license
 * https://github.com/Excolo/ExcoloSlider/blob/master/MIT-LICENSE
 */
;(function(f,d,a,g){var b,e,c;b="1.0.0";e="excoloSlider";c=(function(){function h(j,i){this.elem=j;this.$elem=f(j);this.options=i;this.metadata=this.$elem.data("plugin-options")}return h})();c.prototype={defaults:{width:800,height:530,autoSize:true,keyboardNav:true,touchNav:true,mouseNav:true,prevnextNav:true,prevnextAutoHide:true,pagerNav:true,startSlide:1,autoPlay:true,delay:0,interval:3000,repeat:true,playReverse:false,hoverPause:true,captionAutoHide:false,animationCssTransitions:true,animationDuration:500,animationTimingFunction:"linear",prevButtonClass:"slide-prev",nextButtonClass:"slide-next",prevButtonImage:"Images/prev.png",nextButtonImage:"Images/next.png",activeSlideClass:"es-active",slideCaptionClass:"es-caption",pagerClass:"es-pager",pagerImage:"Images/pagericon.png"},init:function(){var h,o,j,k,i,m,q,l,n,p;h=this;h.config=f.extend({},h.defaults,h.options,h.metadata);h.data=f.data(h);f.data(h,"currentSlide",h.config.playReverse&&h.config.startSlide==1?h.$elem.children().length-1:h.config.startSlide-1);f.data(h,"nextSlide",h.data.currentSlide);f.data(h,"totalslides",h.$elem.children().length);f.data(h,"browserEnginePrefix",h._getBrowserEnginePrefix());f.data(h,"isPlaying",false);f.data(h,"isAnimating",false);f.data(h,"playPaused",false);f.data(h,"justTouched",false);f.data(h,"isMoving",false);f.data(h,"width",h.config.width);h.$elem.addClass("slider");h.$elem.css({position:"relative"});h.$elem.wrapInner("<div class='slide-wrapper'>",h.$elem).children();h.$elem.wrapInner("<div class='slide-container'>",f(".slide-wrapper",h.$elem)).children();h.$elem.wrapInner("<div class='slide-dragcontainer'>",f(".slide-container",h.$elem)).children();f(".slide-container",h.$elem).css({position:"relative"});p=f(".slide-dragcontainer",h.$elem);l=f(".slide-wrapper",h.$elem);n=l.children();if(h.config.prevnextNav){l.after("<div class='"+h.config.nextButtonClass+"'>");l.after("<div class='"+h.config.prevButtonClass+"'>");k=f("."+h.config.nextButtonClass,h.$elem);j=f("."+h.config.prevButtonClass,h.$elem);k.append("<img src='"+h.config.nextButtonImage+"'>");j.append("<img src='"+h.config.prevButtonImage+"'>");i=k.add(j);if(h.config.prevnextAutoHide){i.hide();h.$elem.hover(function(){i.fadeIn("fast")},function(){i.fadeOut("fast")})}j.on("click",function(r){h.previous()});k.on("click",function(r){h.next()})}if(h.config.pagerNav){h.$elem.append("<ul class='"+h.config.pagerClass+"'>");n.each(function(){f("<li />").appendTo(f("."+h.config.pagerClass,h.$elem)).attr("rel",f(this).index()).css({"background-image":"url('"+h.config.pagerImage+"')"}).on("click",function(){f.data(h,"nextSlide",f(this).attr("rel"));h._slide();h._manualInterference()})})}n.each(function(){m=f(this);q=m.data("plugin-slide-caption");if(q===g){return}if(this.tagName=="IMG"){m.wrap("<div>");m.after("<div class='"+h.config.slideCaptionClass+"'>");m.next().append(q)}else{m.append("<div class='"+h.config.slideCaptionClass+"'>");m.children().last().append(q)}if(h.config.captionAutoHide){f("."+h.config.slideCaptionClass,h.$elem).hide();h.$elem.hover(function(){f("."+h.config.slideCaptionClass,h.$elem).fadeIn("fast")},function(){f("."+h.config.slideCaptionClass,h.$elem).fadeOut("fast")})}});l.children().addClass("slide").css({position:"absolute",top:0,left:0,width:h.data.width,height:h.config.height,zIndex:0,display:"none",webkitBackfaceVisibility:"hidden"});o=n.height();l.css({position:"relative",left:0,height:o});f(".slide-container",h.$elem).css({width:h.data.width,overflow:"hidden",height:o});if(h.config.touchNav){p.on("touchstart",function(s){var r=s.originalEvent.touches[0];s.preventDefault();h._onMoveStart(r.pageX,r.pageY);return s.stopPropagation()});p.on("touchmove",function(s){var r=s.originalEvent.touches[0];s.preventDefault();h._onMove(r.pageX,r.pageY);return s.stopPropagation()});p.on("touchend",function(r){r.preventDefault();h._onMoveEnd();return r.stopPropagation()})}if(h.config.mouseNav){p.css("cursor","pointer");p.on("dragstart",function(r){return false});p.on("mousedown",function(r){h._onMoveStart(r.clientX,r.clientY);f(d).attr("unselectable","on").on("selectstart",false).css("user-select","none").css("UserSelect","none").css("MozUserSelect","none");return r.stopPropagation()});f(d).on("mousemove",function(r){h._onMove(r.clientX,r.clientY);return r.stopPropagation()});f(d).on("mouseup",function(r){h._onMoveEnd();f(d).removeAttr("unselectable").unbind("selectstart").css("user-select",null).css("UserSelect",null).css("MozUserSelect",null);return r.stopPropagation()})}if(h.config.keyboardNav){f(d).keydown(function(r){return h._onKeyboardNav(r)})}if(h.config.autoSize){setTimeout(function(){h._resize()},50);f(d).resize(function(){return setTimeout(function(){h._resize()},50)})}h._prepareslides();h.gotoSlide(h.data.currentSlide);if(h.config.autoPlay){setTimeout(function(){h.start()},h.config.delay)}return this},previous:function(){var h,i;h=this;f.data(h,"slideDirection","previous");i=(h.data.nextSlide-1)%h.data.totalslides;if(!h.config.repeat&&(h.data.nextSlide-1)<0){if(h.config.playReverse){f.data(h,"playPaused",true);h.stop()}return}else{if(h.data.playPaused&&(h.data.nextSlide-1)>0){f.data(h,"playPaused",false);h.start()}}f.data(h,"nextSlide",i);return this._slide()},next:function(){var h,i;h=this;f.data(h,"slideDirection","next");i=(h.data.nextSlide+1)%h.data.totalslides;if(!h.config.repeat&&(h.data.nextSlide+1)>(h.data.totalslides-1)){if(!h.config.playReverse){f.data(h,"playPaused",true);h.stop()}return}else{if(h.data.playPaused&&(h.data.nextSlide+1)<(h.data.totalslides-1)){f.data(h,"playPaused",false);h.start()}}f.data(h,"nextSlide",i);return this._slide()},start:function(){var i,h,j;i=this;h=f(".slide-container",i.$elem);if(i.data.isPlaying&&i.data.playTimer){clearInterval(i.data.playTimer)}j=setInterval((function(){if(i.config.playReverse){i.previous()}else{i.next()}}),i.config.interval);f.data(i,"playTimer",j);if(i.config.hoverPause){h.unbind();h.hover(function(){f.data(i,"playPaused",true);return i.stop()},function(){f.data(i,"playPaused",false);return i.start()})}f.data(i,"isPlaying",true)},stop:function(){var i,h;i=this;h=f(".slide-container",i.$elem);clearInterval(i.data.playTimer);f.data(i,"playTimer",null);if(i.config.hoverPause&&!i.data.playPaused){h.unbind()}f.data(i,"isPlaying",false)},gotoSlide:function(m){var j,i,n,l,k,h;j=this;f.data(j,"nextSlide",(m)%j.data.totalslides);i=(m)%j.data.totalslides;f.data(j,"currentSlide",i);n=f(".slide-wrapper",j.$elem);l=n.children();k=n.children(":eq("+i+")");h=k.position().left;j._setActive(l,k);if(j.config.animationCssTransitions&&j.data.browserEnginePrefix){j._transition((-h),0)}else{n.position().left=-h}j._alignSlides(h)},_manualInterference:function(){var h=this;if(h.data.isPlaying){h.stop();h.start()}},_prepareslides:function(){var l,n,m,j,k,h;l=this;n=f(".slide-wrapper",l.$elem);m=n.children();j=l.data.width;k=Math.floor(l.data.totalslides/2);h=0;m.each(function(){f(this).css({display:"block",left:j*h,zIndex:10});h++;if(l.config.repeat&&h>k){h=l.data.totalslides%2?-k:-(k-1)}})},_onKeyboardNav:function(j){var i,h;i=this;h=j.which;switch(h){case 37:i.previous();i._manualInterference();break;case 39:i.next();i._manualInterference();break}j.preventDefault()},_onMoveStart:function(h,j){var i=this;if(!i.data.isMoving){f.data(i,"touchTime",Number(new Date()))}f.data(i,"touchedX",h);f.data(i,"touchedY",j);f.data(i,"isMoving",true);if(i.data.isPlaying){f.data(i,"playPaused",true);i.stop()}},_onMove:function(o,n){var h,p,l,k,m,i,j;h=this;if(!h.data.isMoving){return}p=f(".slide-wrapper",h.$elem);f.data(h,"scrolling",Math.abs(o-h.data.touchedX)<Math.abs(n-h.data.touchedY));if(!h.data.scrolling&&!h.data.isAnimating){l=p.children(":eq("+h.data.nextSlide+")");k=l.position().left;m=h.data.browserEnginePrefix.css;i=o-h.data.touchedX;j=h.data.width*0.1;if(!h.config.repeat){if(h.data.currentSlide<=0&&-i<-j){i=j}else{if(h.data.currentSlide>=(h.data.totalslides-1)&&-i>j){i=-j}}}h._transition(-k+i,0)}},_onMoveEnd:function(){var l,n,m,i,k,h,j;l=this;n=f(".slide-wrapper",l.$elem);f.data(l,"justTouched",true);m=n.children(":eq("+l.data.nextSlide+")");i=m.position().left;k=l.data.width*0.5;h=l.data.width*0.1;j=(Number(new Date())-l.data.touchTime<250);if(!l.config.repeat&&(n.position().left<-(i)&&l.data.currentSlide>=(l.data.totalslides-1)||n.position().left>(-i)&&l.data.currentSlide<=0)){l._transition((-i),0.15)}else{if(n.position().left>(-i+k)||(n.position().left>(-i+h)&&j)){this.previous()}else{if(n.position().left<-(i+k)||(n.position().left<-(i+h)&&j)){this.next()}else{l._transition((-i),0.15)}}}l._alignSlides(i);f.data(l,"isMoving",false);f.data(l,"justTouched",false);if(l.data.playPaused){l.start()}},_alignSlides:function(r){var j,s,q,o,t,k,h,l,n,m,p;j=this;if(!j.config.repeat){return}s=f(".slide-wrapper",j.$elem);q=s.children();if(r===g){o=s.children(":eq("+j.data.nextSlide+")");r=o.position().left}r=Math.round(r,0);t=Math.ceil(j.data.totalslides/2);k=j.data.width;h=0;q.each(function(){var i=f(this).position().left;if(i>r-k){h++}});l=t-h;if(l<0){l=j.data.totalslides%2==0?l+1:l}for(n=0;n<Math.abs(l);n++){m=[].reduce.call(q,function(i,u){return f(i).offset().left<f(u).offset().left?i:u});p=[].reduce.call(q,function(i,u){return f(i).offset().left>f(u).offset().left?i:u});if(l>0){f(m).css("left",Math.round(f(p).position().left+k))}else{f(p).css("left",Math.round(f(m).position().left-k))}}},_slide:function(){var i,l,h,q,p,n,m,j,o,k;i=this;l=i.data.nextSlide;h=i.data.currentSlide;q=f(".slide-wrapper",i.$elem);p=q.children();n=q.children(":eq("+l+")");m=q.children(":eq("+h+")");j=i.data.width;o=Math.round(m.position().left);k=Math.round(n.position().left);i._setActive(p,n);i._alignSlides(k);f.data(i,"isAnimating",true);if(i.config.animationCssTransitions&&i.data.browserEnginePrefix){i._transition((-k),(i.data.justTouched?0.5:1));q.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){f.data(i,"currentSlide",l);q.unbind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd")})}else{q.stop().animate({left:-k},i.config.animationDuration,function(){f.data(i,"currentSlide",l);f.data(i,"isAnimating",false);f.data(i,"justTouched",false)})}},_transition:function(i,k){var m,o,l,h,n,j;m=this;o=f(".slide-wrapper",m.$elem);if(k===g||k<0){k=1}l=m.data.browserEnginePrefix.css;h=l+"Transform";n=l+"TransitionDuration";j=l+"TransitionTimingFunction";o[0].style[n]=(m.config.animationDuration*k)+"ms";o[0].style[j]=m.config.animationTimingFunction;o[0].style[h]="translateX("+i+"px)";o.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){f.data(m,"isAnimating",false);f.data(m,"justTouched",false);o.unbind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd")})},_setActive:function(l,k){var j=this,i,h;i=j.config.activeSlideClass;l.removeClass(i);k.addClass(i);if(j.config.pagerNav){h=f("."+j.config.pagerClass,j.$elem);h.children().removeClass("act");h.find("[rel="+k.index()+"]").addClass("act")}},_resize:function(){var l,h,j,i,k;l=this;if(l.data.isPlaying){f.data(l,"playPaused",true);l.stop()}h=l.$elem.width();j=l.config.height/l.config.width;i=h*j;f.data(l,"width",h);f(".slide",l.$elem).css({width:h,height:i});k=f(".slide-wrapper",l.$elem).children().height();f(".slide-wrapper",l.$elem).css({height:k});f(".slide-container",l.$elem).css({width:h,height:k});if(l.data.playPaused){f.data(l,"playPaused",false);l.start()}l._prepareslides();l.gotoSlide(l.data.currentSlide)},_getBrowserEnginePrefix:function(){var j,k,h;j="Transition";k=["Moz","Webkit","Khtml","O","ms"];h=0;while(h<k.length){if(typeof a.body.style[k[h]+j]==="string"){return{css:k[h]}}h++}return false}};c.defaults=c.prototype.defaults;f.fn.excoloSlider=function(h){return this.each(function(){new c(this,h).init()})}})(jQuery,window,document);